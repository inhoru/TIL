#  ğŸ”– ëª©ì°¨

1. [í˜ì´ì§•ì²˜ë¦¬](#1-í˜ì´ì§•ì²˜ë¦¬)<br/>
2. [í˜ì´ì§• ì²˜ë¦¬ ê³¼ì •](#2-í˜ì´ì§• ì²˜ë¦¬ ê³¼ì •)<br/>
3. [í˜ì´ë°” êµ¬ì„±í•˜ëŠ” html](#3-í˜ì´ë°” êµ¬ì„±í•˜ëŠ” html)<br/>




<br/>


# 1. í˜ì´ì§•ì²˜ë¦¬

- ë‹¤ìˆ˜ì˜ë°ì´í„°ë¥¼ ì¶œë ¥í• ë•Œ í˜ì´ì§€ë³„ë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ëŠ” ê¸°ëŠ¥
- í•œê°œí˜ì´ì§€ì•ˆì— ë‚´ê°€ì›í•˜ëŠ” dataìˆ˜ë¥¼ ì •í•œë‹¤.



<br/>



## í˜ì´ì§•ì²˜ë¦¬ë¥¼ ìœ„í•œ ê³„ì‚°ë²• ë° ë³€ìˆ˜ë“¤...

- í•„ìš”ë³€ìˆ˜ 
  - totalPage : ì „ì²´ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒì„±ë  í˜ì´ì§€ì˜ ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
    - ê³„ì‚° : totalData/numPerPage * ì†Œìˆ˜ì ë‚˜ì˜¬ìˆ˜ ìˆìŒ -> ë¬´ì¡°ê±´ ì˜¬ë¦¼ì²˜ë¦¬!
  - totalData : DBì— ì €ì¥ëœ ì „ì²´ ë°ì´í„° ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
  - cPage : í˜„ì¬í˜ì´ì§€ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
  - numPerpage : í˜ì´ì§€ë‹¹ ì¶œë ¥ë  ë°ì´í„° ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
  - pageNo : pageBarì˜ ì‹œì‘ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
    - ê³„ì‚° : ((cPage-1)/pageBarSize)*pageBarSize+1
  - pageEnd : pageBarì˜ ëë²ˆí˜¸ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
    - ê³„ì‚° : pageNo+pageBarSize-1
  - pageBarSize : pageBarì— ì¶œë ¥ë  pageë²ˆí˜¸ì˜ ê°¯ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
  - pageBar(String) : pageBarë¥¼ êµ¬ì„±í•˜ëŠ” htmlêµ¬ë¬¸ì„ ì €ì¥í•˜ëŠ” ë³€ìˆ˜



<br/>



## ë°ì´í„°ë¥¼ ì¡°íšŒí• ë•Œ ì›í•˜ëŠ” pageë³„ ë°ì´í„°ë§Œ ê°€ì ¸ì˜¤ëŠ” êµ¬ë¬¸ì‘ì„±í•˜ê¸°

- ì‹œì‘rownum : (cPage-1)*numPerpage+1
- ë rownum : cPage*numPerpage



- ë°ì´í„°ì¡°íšŒí• ë•Œ ì‚¬ìš©í•˜ëŠ” sqlë¬¸

```sql
SELECT * FROM (SELECT ROWNUM AS RNUM, M.* FROM (SELECT * FROM MEMBER)M) WHERE RNUM BETWEEN ? AND ?
```

- between and ì•ˆì— ì›í•˜ëŠ” í˜ì´ì§€ë¥¼ ë¥¼ ì ì–´ë„£ìœ¼ë©´ ì›í•˜ë‚œ pageë³„ ë°ì´í„°ë§Œê°€ì ¸ì˜¨ë‹¤.

```java
pstmt = conn.prepareStatement(sql.getProperty("selectMemberAll"));
			pstmt.setInt(1, (cPage - 1) * numPerpage + 1);
			pstmt.setInt(2, cPage * numPerpage);
```

- ì´ë ‡ê²Œ daoì— ì‘ì„±í•œë‹¤ë©´ ì²«í˜ì´ì§€ë¶€í„° ëí˜ì´ì§€ê¹Œì§€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ìˆ˜ìˆë‹¤.



<br/>





# 2. í˜ì´ì§• ì²˜ë¦¬ ê³¼ì •

- ë¨¼ì € í˜ì´ì§•ì²˜ë¦¬ë¥¼ í•˜ê¸°ìœ„í•´ì„œëŠ” servletì— ë¡œì§ì„ ì‘ì„±í•´ì¤˜ì•¼í•œë‹¤.
- DBì— memberí…Œì´ë¸”ì— ì €ì¥ëœ ì „ì²´íšŒì›ì„ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥ì„í•œë‹¤ê³  ìƒê°í•´ë³´ì



```java
//í˜ì´ì§•ì²˜ë¦¬í•˜ê¸°
		int cPage;
		try {
			cPage=Integer.parseInt(request.getParameter("cPage"));
		}catch(NumberFormatException e) {
			cPage=1;
		}
		int numPerpage;
		try {
			numPerpage=Integer.parseInt(request.getParameter("numPerpage"));
		}catch(NumberFormatException e) {
			numPerpage=10;
		}
```

- ë¨¼ì € í˜ì´ì§• ì²˜ë¦¬ë¥¼ìœ„í•´ cPageì™€ numPerpageë¥¼ ì„ ì–¸í•´ì¤€ë‹¤.
- cPageëŠ” í˜„ì¬í˜ì´ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜ì´ë‹¤.
- numPerpageëŠ” í˜ì´ì§€ë‹¹ ì¶œë ¥ë  ë°ì´í„° ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜ì´ë‹¤.
- ë¨¼ì €  cPageë‘ numPerpageë¥¼ ì´ˆê¸°í™”ì‹œì¼œì£¼ëŠ” ì½”ë“œì´ë‹¤.
- ì´ë ‡ê²Œë˜ë©´ í•œí˜ì´ì§€ë§ˆë‹¤ 10ê°œì˜ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” ê²ƒë””ëœë‹¤.

<br/>

## ë°ì´í„°ê°€ì ¸ì˜¤ê¸°

- ì´ì œ DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì„ì§œë©´ëœë‹¤.
- ìš°ë¦¬ê°€ ìì£¼í–‡ë˜ê±°ë‹¤.

```java
//1. DBì—ì„œ memberí…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
		List<Member> members=new AdminService().selectMemberAll(cPage,numPerpage);
		//2. DBì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„° ì €ì¥(í™”ë©´ì¶œë ¥)
		request.setAttribute("members", members);
```



<br/>



## í˜ì´ì§€ë°” êµ¬ì„±

- ì´ì œ í˜ì´ë°”ë¥¼ êµ¬ì„±í• ê±°ë‹¤,.
- í˜ì´ì§€ë°”ë€? ìš°ë¦¬ê°€ ê²Œì‹œê¸€ê°™ì€ë°ì„œ ìì£¼ë³´ë˜ ìˆ«ìê°€ì‡ê³  ë¶€ë“±í˜¸ë¡œ ì›€ì§ì—¬ì„œ ë‹¤ë¥¸ë°ì´í„°ë¥¼ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.



![í˜ì´ì§€ë°”](https://user-images.githubusercontent.com/126074577/244360227-1d06838e-7127-4698-b441-d18cc82901c7.png)

- ì´ëŸ°ê±°ë¼ê³ ë³´ë©´ëœë‹¤.

<br/>

## DBì—ì €ì¥ëœ ì „ì²´ ë°ì´í„°ìˆ˜ ê°€ì ¸ì˜¤ê¸°



- ë¨¼ì € totalDataì— DBì—ì €ì¥ëœ ì „ì²´ë°ì´í„° ìˆ˜ë¥¼ ê°€ì ¸ì™€ì•¼í•œë‹¤.

```java
// 1) DBì— ì €ì¥ëœ ì „ì²´ ë°ì´í„°ì˜ ìˆ˜ë¥¼ ê°€ì ¸ì˜¤ê¸°
		int totalData=new AdminService().selectMemberCount();
		// 2) ì „ì²´í˜ì´ì§€ìˆ˜ë¥¼ ê³„ì‚°í•˜ê¸° * ì†Œìˆ˜ì  ì£¼ì˜!
		
```

- sqlë¬¸ count ì„ ì´ìš©í•´ì„œ daoì—ì„œ ê·¸ìˆ˜ë¥¼ intê°’ìœ¼ë¡œ ê°€ì ¸ì˜¤ë©´ëœë‹¤.

```java
public int selectMemberCount(Connection conn) {
		PreparedStatement pstmt = null;
		ResultSet rs = null;
		int result = 0;
		try {
			pstmt = conn.prepareStatement(sql.getProperty("selectMemberCount"));
			rs = pstmt.executeQuery();
			if (rs.next()) {
				result = rs.getInt(1);
			}
		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			close(rs);
			close(pstmt);
		}
		return result;
	}

sql=selectMemberCount=SELECT COUNT(*) FROM MEMBER
```



<br/>



## ì „ì²´ í˜ì´ì§€ìˆ˜ ê³„ì‚°í•˜ê¸°

- ì „ì²´ ë°ì´í„°ìˆ˜ë¥¼ ê°€ì ¸ì™“ë‹¤ë©´  ì „ì²´í˜ì´ì§€ë¥¼ ê³„ì‚°í•´ì•¼í•˜ëŠ”ë°
- totalData ë‚˜ëˆ„ê¸° numPerpageë¥¼í•˜ë©´ëœë‹¤.
- ì´ë•Œ ì†Œìˆ˜ì ìë¦¬ê°€ ë‚˜ì˜¤ê¸°ë•Œë¬¸ì— ë¬´ì¡°ê±´ ì˜¬ë¦¼ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼í•œë‹¤
- ê·¸ë•Œì‚¬ìš©í•˜ëŠ” Math.*ceil*ì´ë‹¤ ì†Œìˆ˜ì ì„ ì˜¬ë ¤ì£¼ëŠ” í•¨ìˆ˜ë‹¤.



```java
// 2) ì „ì²´í˜ì´ì§€ìˆ˜ë¥¼ ê³„ì‚°í•˜ê¸° * ì†Œìˆ˜ì  ì£¼ì˜!
		int totalPage=(int)Math.ceil((double)totalData/numPerpage);
```



<br/>





## í˜ì´ì§€ë°” ì‹œì‘ë²ˆí˜¸

- ë¨¼ì € í˜ì´ìë°”ê°€ ëª‡ë²ˆê¹Œì§€ìˆì„ê±´ì§€ ì •í•´ì•¼í•œë‹¤
- ê·¸í›„ ì‹œì‘ë²ˆí˜¸ì™€ ëë²ˆí˜¸ë¥¼ ë³€ìˆ˜ì—ì €ì¥í• ìˆ˜ê°€ìˆë‹¤.

```java
// 2) ì „ì²´í˜ì´ì§€ìˆ˜ë¥¼ ê³„ì‚°í•˜ê¸° * ì†Œìˆ˜ì  ì£¼ì˜!
int totalPage=(int)Math.ceil((double)totalData/numPerpage);
int pageBarSize=5;
// 3) í˜ì´ì§€ë°” ì‹œì‘ë²ˆí˜¸ ê³„ì‚°í•˜ê¸°
int pageNo=((cPage-1)/pageBarSize)*pageBarSize+1;
int pageEnd=pageNo+pageBarSize-1;
```





<br/>

 # 3. í˜ì´ë°” êµ¬ì„±í•˜ëŠ” html

- ì´ì œ ëª¨ë“ ì¤€ë¹„ê°€ëë‚«ë‹¤ 
- ì§€ê¸ˆê¹Œì§€ ì €ì¥í•œë³€ìˆ˜ë“¤ì„ ì´ìš©í•´ì„œ í˜ì´ì§€ë°” htmlì„ë§Œë“¤ì–´ë³´ì

- ë¨¼ì € pageBarë¼ëŠ” Stringë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì—¬ê¸°ì— htmlë“¤ì„ ë„£ì„ê±°ë‹¤



<br/>

## ì´ì „í‘œì‹œ

- ì´ì „ ë²„íŠ¼ë¶€í„° ë§Œë“¤ì–´ë³´ì
- 1í˜ì´ë©´ ì´ì „ì„ í• ìˆ˜ì—†ì–´ì•¼í• í…Œë‹ˆ ifë¬¸ì„ ì‚¬ìš©í•´ì„œ aíƒœê·¸ë¥¼ì¤„ê²ƒì´ë‹¤



```java
//ì´ì „í‘œì‹œí•˜ê¸°
    if(pageNo==1) {
        pageBar+="<span>[ì´ì „]</span>";
    }else {
        pageBar+="<a href='"+request.getRequestURI()
        +"?cPage="+(pageNo-1)+"'>[ì´ì „]</a>";
    }
```

- pageNoê°€ 1ì¼ë•ŒëŠ” ì´ì „ì´ì—†ìœ¼ë‹ˆ spanìœ¼ë¡œ ë¬¸ìë©´ë„£ì–´ì£¼ê³ 
- ë‚˜ë¨¸ì§€ëŠ” ë¬´ì¡°ê±´ ì´ì „ì´ìˆì„í…Œë‹ˆ aíƒœê·¸ë¡œ pageNo-1í˜ì´ì§€ë¡œ ì´ë™ì‹œì¼œì¤€ë‹¤.



<br/>



## ì„ íƒí•  í˜ì´ì§€ ë²ˆí˜¸ ì¶œë ¥í•˜ê¸°

```java
//ì„ íƒí•  í˜ì´ì§€ ë²ˆí˜¸ ì¶œë ¥í•˜ê¸°
    while(!(pageNo>pageEnd||pageNo>totalPage)) {
        if(pageNo==cPage) {
            pageBar+="<span>"+pageNo+"</span>";
        }else {
            pageBar+="<a href='"+request.getRequestURI()
                +"?cPage="+pageNo+"'>"+pageNo+"</a>";
        }
        pageNo++;

    }
```



<br/>



## ë‹¤ìŒ ë²„íŠ¼

```java
//ë‹¤ìŒì¶œë ¥
		if(pageNo>totalPage) {
			pageBar+="<span>[ë‹¤ìŒ]</span>";
		}else {
			pageBar+="<a href='"+request.getRequestURI()
				+"?cPage="+pageNo+"'>[ë‹¤ìŒ]</a>";
		}
```

<br/>

- ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ jspë¡œ ë³´ë‚´ì£¼ë©´ëœë‹¤.

```java
request.setAttribute("pageBar", pageBar);	
		
		//3. ì¶œë ¥í•  í™”ë©´ì„ ì„ íƒ(ì´ë™)
		request.getRequestDispatcher("/views/admin/memberList.jsp")
		.forward(request, response);
		
```



<br/>



## jspì¶œë ¥

- setìœ¼ë¡œ ì €ì¥í•˜ê³  ì´ë™í–‡ê¸°ë•Œë¬¸ì—
- getìœ¼ë¡œ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•˜ë©´ëœë‹¤.
- ìœ„ì¹˜ëŠ” ìê¸°ê°€ì›í•˜ëŠ”ìœ„ì¹˜ì— getìœ¼ë¡œ ê°€ì ¸ì˜¤ë©´ëì´ë‹¤.



```html
<div id="pageBar">
        	<%=request.getAttribute("pageBar") %>
        </div>
    </section>
```

<br/>





